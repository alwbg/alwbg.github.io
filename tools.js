!function(e,t){if(e.global=e,"object"==typeof exports);else if("function"==typeof define)define("mode",t);else{e.require||(e.require=function(t){return e[t]});var n={exports:{}};t(e.require||function(e){alert('需要实现 require(),加载模块:"'+e+'"')},n.exports,n),e.mode=n.exports}}(this,function(e,t,n){var r,i=this;function isNil(e){return e===r}var o=[].slice,a={},s=/\[object\s(\w+)\]/;function iNothingRun(){}function merge(e,t,n,r){var i,a,s,c,u;for(a=(u=o.call(arguments)).pop(),u.push(a),/false|true/gi.test(a)||u.push(!1),a=u.pop(),c=u.shift();s=u.shift();)for(i in s)!a&&c.hasOwnProperty&&c.hasOwnProperty(i)||(c[i]=s[i])}function iList2Array(e){return Array.apply(r,e)}function iPickType(e){return function iTypeTo(e){return a.toString.call(e)}(e).replace(s,"$1")}var c=iPickType(a);function isFunction(e){return e instanceof Function}function MS(e,t,n){isFunction(t)||(t=function(){}),e.forEach(function(e,n){t.call(this,e,n)},this)}var u={changeWay:function(e,t,n,r,i){return n[0]=r[t],n[1]=t,!isNil(e.ret=i.apply(e.context,n))},Array:function(e,t,n){for(var r=0,i=e.length>>0;r<i;r++)if(u.changeWay(this,r,n,e,t))return this.ret},Object:function(e,t,n){for(var r in e)if(e.hasOwnProperty&&e.hasOwnProperty(r)&&u.changeWay(this,r,n,e,t))return this.ret},Set:MS,Map:MS};function iEach(e,t,n){if(isFunction(t))return(u[iPickType(e)]||u[c]).call({context:n},e,t,iList2Array(arguments))}u.NodeList=u.Array,Function.prototype.bind||(Function.prototype.bind=function(){var e=this;if(!(e instanceof Function))throw"This is not a Function!";var t=iList2Array(arguments),n=t.shift();return function(){var r=iList2Array(arguments);return Array.prototype.unshift.apply(r,t),e.apply(n,r)}});var h=/((\d+)\-(\d+))/,p=/(?:\[(\w+)\]|\{(\w+)\}|\[([^\[\]\{\}'"]+)\]|{(\d+)\-(\d+)}|([\w$]+)(=)\?)|{([^,\}\{]+),([^,}]*),([^,}]*)}/g,f=/(?:,)/,l={now:function(){return+new Date}};function iBetween(e,t,n){isString(e)&&e.search(h)>=0&&(e=RegExp.$2,t=RegExp.$3,n=RegExp.$1);var r,i,o,a=arguments.callee||this,s=a.__tmap_||(a.__tmap_={});if(n&&(r=s[n]))return r;+e<+t?(i=+e,o=+t):(i=+t,o=+e);var c=o-i+1;return r=(1e6*Math.random()>>0)%c+i,n&&(s[n]=r),r}String.prototype.format=function iStringFormat(e){e||(e={});var t=!!e.now;merge(e,l),e.groups={};var n=this.replace(p,function iReplace(e,t,n,r,i,o,a,s,c,u,h){var p;if(this.groups&&e in this.groups)return this.groups[e];if(/^\d+$/.test(i+o))return iBetween(i,o);if(c)return this[c]?this[u]||u:this[h]||h;if(r)return(p=(r=r.split(f))[0])in this&&this[p]instanceof Function?this[r.shift()].apply(this,r):r[iBetween(0,r.length-1)];var l=n||t||a;return a||(a=m,s||(s=m)),this&&l?isNil(p=this[l])?e:a+s+(p instanceof Function?p.call(this):p):(this.groups[e]=e,e)}.bind(e));return delete e.groups,t||delete e.now,n};var d={$1:"$1",$2:"$2",$1$2:"$1$2",GLOBAL:"g",TO_2BYTE:"\t$2"},m="",v=".",y="__mode__",g="__link__",x="_Invoke__",_={caller:x,source:"source",value:'{simply,[value],eval("[value]")}'},$="{caller}/*mode object*/, {source}/*current data*/".format(_),b='try{var nil;return {value};}catch(e){return {caller}.error(e),"";}'.format(_),M='{source}["$2"]$3'.format(_),E=["?","(",")","{","}","|",":","[","]","*","+",".","\\","$"].join("|\\"),R={PICK_EXPR:/(?:(?!\\)\{)(?:\?\s*((?:(?!\?\}).)*)\s*\?|\s*((?:(?![^\\])[\}\{])*[\w-#$@'"]*)([\.\w-#$\[\]\(\)'"]*)\s*)(?:(?!\\)\})/gi,PICK_EXPR_ALL:/\{\?\s*((?!\?\}).*)\s*\?\}/gi,FILTER_FX:new RegExp("(\\[0])".format([E]),d.GLOBAL),TO_ONE_OR_TOW_BYTE:/(?:\t([^\x00-\xff])|([^\x00-\xff]))/gi,SHOW_SUFFIX:/^(.*)(?:\.(\w{1,10}))$/,OWN_TAG:/<([A-Z]+\w*)(?:\s+((?:(?!\/>|>)[\w|\W])*)|)(?:\/>|>((?:(?!\<\/\1>)[\w\W])*)<\/\1>|)/gm,isSimplyData:/\[object (?:string|number|boolean)\]/i},O='<div data-component="{?_component_name_("$1")?}" class="$1-Room" {?{hide}?"style=\'display:none\'":""?}>{?_createChildMode__("$1", source, {$index});?}</div>',L='$1{?{tagName}||{#tagName}||{tag}||({clear}?{#$name()}.toLowerCase():"div");?}',A="<$1 $2>$3</$1>",C={0:'"+($1)+"',1:"'+($1)+'",leftright:/(\{[^\{\}]+\})/g,spare:[/(\|{2}[^\}]+)(\})/g,"$2$1"],single:"'"},F=[[/(?:[?,:+\(;!&~><=]\s*|^\s*)(["'])(?:(?:(?!\1).)*\{[^\{\}]+\}(?:(?!\1|\{|\}).)*)+\1/g,function(e,t){return replaces(e,[[C.leftright,C[+(t==C.single)]],C.spare])}],[/\{@([^}]+)\}/g,"{#$source.$1}"],[/\{\s*((?:\$offset|\$index))\s*\}/g,"{#$1}"],[/\{#\s*(?:this\.?)?([^}]+)\}/g,x+".$1"],[/({\s*this\s*})/g,_.source],[R.PICK_EXPR,M],[/(?:^|((?:[$]?\w+\s*\.)+)|;|,|\+|\-|\*|\/|[\r\n\t])\s*(\w+)\s*\(([^\)]?)/g,function(e,t,n,r){return x+v+'__pick_value_for_you_("'+(t||m)+n+'"'+(r?","+r:m)}]],w=[[R.PICK_EXPR,M],[/(\")/g,"\\$1"]],k=[[/(\{|\$)/g,function(e){return"&#"+e.charCodeAt(0)}]],T=/^([A-Z])/,B=/(?:\s|)(if|while|for|with|switch)(?:\s*\()/,S=[b.format({simply:!0}),b.format()],P=[F,w],N=["insertBefore","appendChild"],I={},z="(<|<\\/){tag}(?=\\s|>)";function iCreateComponentsTagNameReplaceRegExp(e){return I[e]||(I[e]=new RegExp(z.format({tag:e}),d.GLOBAL))}function iExecFx(){var e=iList2Array(arguments),t=e.shift();return t instanceof Function?t.apply(e.shift(),e):r}function replaces(e,t,n){for(var r,i=0;r=t[i++];)e=m.replace.apply(e,r);return n?m.format.call(n,{value:e}):e}function giveMeGoods(e,t){return t||(t=B.test(e)),e=replaces(e,P[t=+!!t],S[t]),new Function($,e)}function buildModeFactory(e,t){for(var n,r,i,o=(t=function components(e,t,n){if(n.elements=ee.createElement(),e){for(var r,i,o,a,s=n.components={};r=e.shift();)R.OWN_TAG.test(r),i=RegExp.$1,a=RegExp.$3,t=t.replace(r,O.replace(/\$1/g,i)),a||(r=r.replace(R.OWN_TAG,A)),(o=s[i]=new Mode(r.replace(iCreateComponentsTagNameReplaceRegExp(i),L))).parentMode=n,o._name__=i;n.auto=!0,n.elements.innerHTML=t}return t}((t=G.init(t,e)).match(R.OWN_TAG),t,e)).match(R.PICK_EXPR)||[],a={},s=[],c=o.length;c--;)(r=o[c])in a||(a[r]=null,n=r.replace(R.PICK_EXPR_ALL,d.$1),s.push({R:(i=r,new RegExp(i.replace(R.FILTER_FX,"\\$1"),d.GLOBAL)),goods:giveMeGoods(n),source:r}));s.sort(function(e,t){return t.source.length-e.source.length}),e.execJsFactory=s,e[y]=t}var H={index:"_bind-i",key:"_bind-key"},W=/<[^<]+\s+\:[^=&#?]+=[^<>]+>/g,q=/\s+(\:([^=&#?]+)=(?:("|')((?:(?!\3).)*)\3|[^=&\s]*))+/g,D="@BindMap",G={rClassOrStyle:/^(@|\*)?(?:(class|style|html)(?:\.([^.]+)|)|([^.]+))$/i,ATTR:"[{key}]".format(H),init:function(e,t){return G.invoke(t,D),e.replace(W,G.replace.bind({host:t,context:G}))},deep:function(e,t){return iEach(e.components,function(e,t){if(t==this.name)return e;var n=e.components,r=this.name;return n?this.caller(e,r):r in n?n[r]:void 0},{name:t,caller:G.deep})},exec:{$:function(e){var t=iList2Array(arguments),n=function iGetResult(e){return e instanceof Function?e():e}(e.elements);return t[0]=e.multi?n:[n[e.index]],iEach.apply(r,t)},html:function(e){var t='[[key]="{id}"]'.format({key:H.key,id:this.id});return G.exec.$(this,function(n){var r=G.deep(this.host,this.component);ee.family(r,e,this.index);var i=ee.query(t,r.elements);n.innerHTML=m,iEach(iList2Array(i.childNodes),function(e){e&&this.appendChild(e)},n)},this)},attr:function(e){return G.exec.$(this,function(e,t,t,n){ee.attr(e,this.property,n)},this,e)},"class":function(e){return G.exec.$(this,function(e){var t=this.value,n=e.className,r=this.rHas.test(n);if(!this.rBool.test(t))return r;!0===t?r||(e.className=this.clazz.format({clazz:n,add:this.name})):e.className=n.replace(this.rHas," ")},{value:e,name:this.name,rBool:/^(true|false)$/,clazz:"{clazz} {add}",rHas:RegExp("(?:^|\\s+){name}(?:\\s+|$)".format(this))})},style:function(e){return G.exec.$(this,function(e){if(this.value===r)return e.style[this.name];e.style[this.name]=this.value},{name:this.name,value:e})}},invoke:function(e,t,n){return e[t]||(e[t]=n||{})},replace:function(e){H.propertykey="{10-99}-{10-99}-{10-99}-{10-99}".format();for(var t,n,r,i,o,a=H.propertykey,s=' {index}="{?{$index}||0?}" {key}="{propertykey}"'.format(H),c=this.context,u=e.match(q),h=c.invoke(this.host[D],a,[]);(t=u.shift())&&q.test(t);)q.lastIndex=0,n=RegExp.$2,r=RegExp.$4,isMulti=iSimplyProp=m,c.rClassOrStyle.test(n)&&(isMulti=RegExp.$1,i=RegExp.$2)?(iSimplyProp=RegExp.$3,o=iSimplyProp?r:r.match(/([^\s|,;]+)/g),n=i,bindFx=c.exec[i]):(o=r,isMulti&&(n=RegExp.$4),bindFx=c.exec.attr),iEach(o instanceof Array?o:[o],function(e){h.push({fx:this,name:e,multi:!!isMulti,host:{id:a,property:n,name:iSimplyProp||e,multi:!!isMulti}})},bindFx);return e.replace(q,s)}};function iBindProerty(e,t,n,r,i){if(!function isEmpty(e){for(var t in e)return!1;return!0}(e[D])){var o=ee.attr(t,H.key),a=ee.attr(t,H.index);ee.attr(t,H.key,null),iEach(e[D][o],function(e){var t={},n=this.host(e.multi);merge(t,e.host,this.mix);var r=e.fx.bind(t);iListener(n,e.name,r,r)},{host:function(t){return t?e[r]:G.invoke(e[r],a)},mix:{index:a,elements:n,host:e,component:r}}),!0===i&&iEach(ee.query(G.ATTR,t,!0),function(e,t,t,n){iBindProerty(this,e,[e],n)},e,r)}}function Mode(e,t){if(isMode(e))return e;this.auto=!!t,this.storage={rank:{},components:{}},buildModeFactory(this,e)}function isMode(e){return e instanceof Mode}function iFilterReplace(e){return replaces(e||e+m,k)}Mode.prototype.iFilterReplace=iFilterReplace;var j={one:function(e,t,n,i){var o=function invoke(e,t,n){n!=r&&(e.$index=n);for(var i,o=e[y],a=e.execJsFactory,s=0;i=a[s++];)o=o.replace(i.R,i.goods(e,t));return o}(e,t,i);return iExecFx(n,e,t,o),o},some:function(e,t,n){for(var r=m,i=t.length,o=e.$start;o<i;o++)e.$index=o,r+=this.one(e,t[o],n);return r}},X=["one","some"],K=Math.random();Mode.prototype.on=function(e,t,n,i,o){var a;if(this.$start||(this.$start=n>>0),this.$offset||(this.$offset=i>>0),iExecFx(this.init,this,e),e!=r&&isMode(a=e.host||e.$host||e.$mode))return a.auto!=r||(a.auto=!0),a.on(e.data);isMode(this.parentMode)&&(this.auto=e.auto,merge(this,e,!0),e=e.data||e),!0===o&&(this.auto=o)||(o=this.auto);var s=j[X[+(e instanceof Array)]](this,e,t);return o?function iInAutoMode(e,t,n){var r=[],i=e.link(r);r.pop();var o,a=e._name__,s=r.join(m),c=e.observer||(e.observer={});if(c[s]instanceof Observer||(c[s]=new Observer),(c=c[s]).data=t,e.data=c.data,e.elements.innerHTML=n,n=iList2Array(e.elements.children),c[g]=n,te.bind(e,c),c.host=e,o=e.parentMode){storage=i.storage;var u=storage.components,h=G.invoke(u,a);h[s]={name:a,elements:n,data:c.data||t};var p=o.storage.rank;return(p[a]||(p[a]=[])).push(s),iExecFx(e.replace,e,n,t,o),m}return iCreateComponents(e),iExecFx(e.onend,e),iList2Array(e.elements.children)}(this,e,s):s},String.prototype.firstChar2LowerCase=function(){return this.replace(T,function(e,t){return t.toLowerCase()})},Mode.prototype._component_name_=function(e){var t;return this.link(t=[]),e+"-"+t.join(m)},Mode.prototype._createChildMode__=function(e,t){var n=t[e]||(n={auto:!0,data:n=t[e.firstChar2LowerCase()]||[]}),i=this.components[e];return i.$source=t,i.on(n,r,r,r,n.auto===r||n.auto)},Mode.prototype.show=function(e,t,n){var r;if(e+=m,R.SHOW_SUFFIX.test(e)&&(r=RegExp.$2)&&!n&&(e=RegExp.$1),t=t||this.showlength||20,(e=e.replace(R.TO_ONE_OR_TOW_BYTE,d.TO_2BYTE)).length>t){var i=r&&r.length+1||0,o=t/2>>>0;e=function toShort(e,t,n,r){var i=t+"-"+n+"-"+r,o=Math.max(n-r,2),a=t-o;return n=Y[i]||(Y[i]=new RegExp("(.{"+o+"}).*(.{"+a+"})",d.GLOBAL)),e.replace(n,"$1...$2")}(e,t,o,i=n?Math.max(i-o,0):0)}return iFilterReplace(e=e.replace(R.TO_ONE_OR_TOW_BYTE,d.$1$2))};var Y={};Mode.prototype.toString=function(e){return e?e.toString().substr(1):this[y]},Mode.prototype.suffix=function(e){return(e+m).replace(R.SHOW_SUFFIX,d.$1)},Mode.prototype.error=function(e){i.echo&&i.echo(e)},Mode.prototype.parent=function(e,t){for(var n,i=this,o=e,a=isFunction(o)?(e=r,o):iNothingRun,s=!(e===r);i;){if(s&&e in i)return i;a.call(t,n=i),i=n.parentMode}return n},Mode.prototype.link=function(e){return this.parent(function(e){var t=e.$index;t=t===r?t>>0:t,this.unshift(t)},e instanceof Array?e:[])},Mode.prototype.$name=function(){return this._name__},Mode.prototype.$observer=function(e){var t;for(var n in this.observer){t=this.observer[n],e===r&&t[g];break}return t||[]},Mode.prototype.$data=function(e,t){return e===r?this.$observer(t).data:this.$observer(t).data=e},Mode.prototype.takeObserverLink=function(){return this.$observer()[g]||[]},Mode.prototype.__pick_value_for_you_=function(){var e,t=iList2Array(arguments),n=t.shift(),i=function __pick_var_line_(e,t){var n=e.storage;if(!n[t]){var r,i,o=t.split(v);o[0]==x&&o.shift(),i=e.parent(o[0])||global;for(var a=0,s=o.length;a<s;a++)(r=i[o[a]])&&a!=s-1&&(i=r);n[t]={fx:r,parent:i}}return n[t]}(this,n);return i.fx instanceof Function?(e=i.fx.apply(i.parent,t))===r?m:e:n+" not found!"},Mode.prototype.IF=function(e,t,n){return e?t:n};var U="string";function isString(e){return typeof e==U}var J=/^#(\d[^\s]*)\s*/,Z=/^(?:input)$/i,Q=["querySelector","querySelectorAll"],V=["setAttribute","removeAttribute"],ee={isDom:function(e){return e&&1==e.nodeType},createElement:function(e){return document.createElement(e||"div")},append:function(e,t,n){return e[N[+!n]](t,n)},insertBefore:function(e,t){var n=e.parentNode;return n&&n[N[0]](t,e),t},insertAfter:function(e,t){var n;return(n=e.nextElementSibling)?ee.insertBefore(n,t):(ee.insertBefore(e,t),ee.insertBefore(t,e)),t},remove:function(e){e.parentNode&&e.parentNode.removeChild(e)},family:function(e,t,n){var r=e.elements;r.innerHTML=j.one(e,t,null,n);var i=r.children;return i.length>1?r.cloneNode():i[0]},query:function(e,t,n){if(isString(e)&&J.test(e)&&(t=document.getElementById(RegExp.$1),(e=e.replace(J,m))==m))return e;if(isString(t)&&t!=m&&(t=ee.query(t)),!(t instanceof Array))return(t||document)[Q[+!!n]](e);for(var r,i;r=t.shift();)if(i=ee.query(e,r,n))return i},getChildByIndex:function(e,t){var n=e.children,r=n.length;return{child:n[t=t>=0?Math.min(r,t):r+(t+1)],index:t}},attr:function(e,t,n){if(e&&1==e.nodeType){var i=Z.test(e.tagName);return n!=r||null===n?i?e[t]=n:e[V[+(null==n)]](t,n):i?e[t]:e.getAttribute(t)}}};Mode.dom=ee,Mode.prototype.replaceWith=function(e,t,n){var r=ee.family(this,e,n);return ee.insertBefore(t,r),ee.remove(t),r},Mode.prototype.push=function(e,t,n){var r,i=this.components;t instanceof Function&&(n=t),i&&(r=i[e])&&(r[t||"replace"]=n)},Mode.prototype.insert=function(e,t,n,r){var i,o=ee.family(this,e,n),a=this.parentNode;return a?(r=+r,i=ee.getChildByIndex(a,r),ee.append(a,o,i.child),i.newly=o):i={newly:o},i};var te={R_ATTR:/\[([^\[\]]+)\]/g,take:function(e,t){return ee.attr(this,e,t)},bind:function(e,t){var n=e.bind;if(n!=r){var i,o,a,s=this.R_ATTR,c=this.take,u=t.data,h=t[g],p=s.test(n);p?(a=RegExp.$1,n=n.replace(s,m)):a=n;for(var f=u.length;f-- >0;)o=h[f],p&&(o=ee.query(n,o)||o),i=c.bind(o,a),iListener(u[f],a,i,i)}}};function iCreateComponents(e){var t=e.parent();iEach(e.storage.rank,function(e,t,n,r){G.invoke(r,t,[]);var i={names:n.components[t],e:r.components[t],selector:"[data-component={name}-{index}]",host:this.host};n.each(e,function(e){var n=this.names[e];n.index=e;var i,o=ee.query(this.selector.format(n),this.host.elements),a=o;if(a){for(var s=n.elements,c=s.length;i=s[--c];)a=ee.insertBefore(a,i),iBindProerty(r,a,s,t,!0);this.e.parentNode=o.parentNode,ee.remove(o)}},i),isMode(i.e)&&this.caller(i.e)},{each:iEach,host:t,caller:iCreateComponents,components:t.storage.components},e)}function iListener(e,t,n,i,o){!function iDefineProperty(e,t,n,r){try{Object.defineProperty(e,t,n)}catch(i){e[t]=iExecFx(n.get,r)}}(e,t,{set:n,get:i,configurable:o===r||o},e)}function iObserverByChild(e,t,n,i){var o=t.data;i!=r||(i=o.length),o[i]||iListener(t.observer,i,function iSet(e,t,n,r){e[t]=r,iExecFx(n||this.trigger,this,e,t,r)}.bind(e,o,i,t.trigger),function iGet(e,t){return e[t]}.bind(e,o,i)),e.data[i]=n,t.data[i]=n}function iObserverBySet(e,t){var n,i=e.data;if(t instanceof Array){i||(i=e.data=[]);var o=e.observer||(e.observer=[]);o.push=function iObserverByChilds(e,t,n,i){var o=t.data;i!=r||(i=o.length),n instanceof Array||(n=[n]);for(var a=0,s=n.length;a<s;a++)iObserverByChild(e,t,n[a],a+i)}.bind(this,this,e),o.push(t,0);for(var a=t.length,s=i.length-a;s-- >0;)this.remove(a+s);i.length=a}else for(n in i||(i=e.data={}),e.observer||(e.observer={}),t)iObserverByChild(this,e,t[n],n)}function Observer(e){var t={data:r,observer:r,trigger:e};iListener(this,"data",iObserverBySet.bind(this,t),function(){return t.observer})}function iCheckPropertyByArray(e,t,n){var i,o={O:e};return(i=iEach(t,function(e){if(this.O=this.O[e],this.O===this.Nil)return!0},o)===r?o.O:r)===r?n:i}Observer.prototype.trigger=function(e,t,n){if(n==K){ee.remove(this[g][t]),this[g].splice(t,1);try{this.data.splice(t,1)}catch(i){delete this.data[t]}}else{if(isNaN(+t))return;this[g]&&this.invoke(t,n,!(t in this[g])||r)}},Observer.prototype.remove=function(e){try{this.data[e]=K}catch(t){}},Observer.prototype.invoke=function(e,t,n){var i,o=this[g],a=o[e];if(n===r){if(!a)return;i=this.host.replaceWith(t,a,e)}else{var s=e;a||(a=o[e-1],s=-1),e=(i=this.host.insert(t,a,e,s)).index,i=i.newly}ee.attr(i,H.key,null);var c=this.host.$name();iBindProerty(this.host.parent(c),i,[i],c,!0),o[e]=i};var ne="Li",re=["prev","next"],ie=["◄","►"],oe='<List/><div><div class="page-code-left"><div class="page-inner-info">{?Math.min({count},({pageNum}-1)*{max}+1)?} - {?Math.min({pageNum}*{max}, {count})?}  &nbsp;  共 {count} 条记录</div></div><div class="page-code-right"><div class="pagination"><ul><Li data-index="{$index}" data-name="{#name}" class="{?{disabled}||""?} {?{cur}?"active" : ""?} {?{clazz}||"";?}" handle="{#handle}"><a href="javascript:;">{?{name}||{index}?}</a></Li></ul></div></div></div>';function Page(){this.Room=new Mode(oe),this.Room.init=function(e){this.dz=[],this.createData(e),e[ne]={handle:e.handle,data:this.dz},this.data||(this.data=e),merge(this.Room.components[ne],e[ne],!0),delete this.dz}.bind(this)}function Hash(e,t){for(var n,r=e.split(/(?:\||,)/g),i={},o=[],a=r.length;a-- >0;)i[n=r[a]]=a,o.unshift("{?{"+n+'}||""?}');this.indexMap=i,this.nameMap=r,this.mode=new Mode(o.join(t||"|"))}function isSimply(e){return R.isSimplyData.test(Object.prototype.toString.call(e))}Page.prototype={Def:{},LI_CHECK:["data",ne,"data"],LIST_CHECK:["data","List","data"],on:function(e){return this.Room.on(e)},pn:function(e,t,n,r){var i=+(t>0),o=i?e==n||0==n:1==e;this.dz.push({tag:"li",name:ie[i],clazz:re[i],disabled:o?"disabled":m,index:i?Math.min(n,e+t):Math.max(1,e+t),max:r,pages:n})},push:function(e,t,n,i){n=n!==r&&n,this.dz.push({tag:"li",name:e,clazz:t||m,index:i==r?e:i,cur:n,disabled:n?"disabled":m})},createData:function(e){var t=e.max,n=e.count,o=+e.pageNum,a=Math.ceil(n/t),s=0,c=e.offset||3;c=Math.min(c,a/2>>0),t=Math.min(2*c+1,a);var u=Math.min(o-1,c)+c-Math.min(c,a-o),h=Math.max(1,o-u);for(this.pn(o,-1,a,e.max),h>1&&this.push(1),h>2&&this.push("...",r,r,h-1);s<t;s++)this.push(h+s,r,o==h+s);a-h-t>0&&this.push("...",r,r,h+t),a-h-t+1>0&&this.push(a),this.pn(o,1,a,i.max)},isDisabled:function(e){return"disabled"===e.disabled},findDataByIndex:function(e){return iCheckPropertyByArray(this.Room,this.LI_CHECK,this.Def)[e]},findListDataByIndex:function(e){return iCheckPropertyByArray(this.Room,this.LIST_CHECK,this.Def)[e]}},Mode.Page=Page,Hash.prototype.toJson=function(e){var t=this.nameMap;e instanceof Array||(e=iList2Array(e));for(var n,r,i={},o=e.length;o-- >0;)(n=t[o])&&(r=e[o],i[n]=isSimply(r)?decodeURIComponent(r):r||m);return i},Hash.prototype.toString=function(e){return this.mode.on(e)},Mode.Hash=Hash,n.exports=Mode});
!function(t,e){if(t.global=t,"object"==typeof exports);else if("function"==typeof define)define("dialog",e);else{t.require||(t.require=function(e){return t[e]});var i={exports:{}};e(t.require||function(t){alert('需要实现 require(),加载模块:"'+t+'"')},i.exports,i),t.dialog=i.exports}}(this,function(t,e,i){var n,r=20160516,s=0,o=document.documentElement,a=/ie\s*(6|5)/gi.test(navigator.userAgent),u=r,c=/\[object\s(\w+)\]/,l=/\s*[;|]\s*/,f=/\s*:\s*/,h=/((\d+)\-(\d+))/,p=/(?:\,|\|{2})/,d=/\=\>/,m=/-([a-z])/g,v=/(height|width|top|left|bottom|right|size|radius|padding|margin)(?:\=|$)/i,g=/^\s*([\+\-\*\/])=(\d+)\w*/,y=/(?:^|;\s*)center\s*:\s*false/,E=/^\d+(?:\.\d+)?$/,b="",R=".",k="px",w="$1",N="e-dialog",C="data",S="div",A="number",T="hover-show-hand",x="offsetWidth",H="offsetHeight",z="target;srcElement=>target",L="*",$="paddingLeft|padding-left=>l,paddingTop|padding-top=>t,paddingRight|padding-right=>r,paddingBottom|padding-bottom=>b",I=["getAttribute","setAttribute"],D=["querySelector","querySelectorAll"],Q=["innerHTML","value"],P=/(?:trident\/\d*.*rv[^\w]*\d*|msie\s*)/i.test(navigator.userAgent),F=a?"absolute":"fixed",O={},B={},M={},W=[],_=[].slice;function iTypeTo(t){return M.toString.call(t)}Function.prototype.bind||(Function.prototype.bind=function(){var t=this;if(!(t instanceof Function))throw"This is not a Function!";var e=iList2Array(arguments),i=e.shift();return function(){var n=iList2Array(arguments);return Array.prototype.unshift.apply(n,e),t.apply(i,n)}});var G=iTypeTo(M),j=iTypeTo(b),U=iTypeTo(window);var V=function(t){return iTypeTo(t)==j},q=function(t){return"[object NodeList]"==iTypeTo(t)||t instanceof Array};function iContent4Element(t){return Q[+/input/i.test(t)]}function iList2Array(t){return Array.apply(n,t)}var K={number:function(t){return parseFloat(t)},float:function(t){return parseFloat(t)},int:function(t){return parseInt(t)}},Z={CENTER:"center",rWidth:/top|bottom/,aLT:["left","top"],aWH:["width","height"],rPosition:/(?:(center)|(left|top|right|bottom))/g,css:function(t,e,i,n,r){r=this.aWH[n],t[this.aLT[n]]=(e[r]-i[r])/2},trigger:function(t,e,i){var n=this.CENTER;t||(t=n),i||(i={});for(var r,s,o,a={},u=this.rWidth,c=t.match(this.rPosition),l=0,f=c.length;l<f;l++)(o=c[l])!=n?a[o]=0:(s=c[(l+1)%f],r=+!u.test(s),this.css(a,i,e,r),s==o&&this.css(a,i,e,+!r));return a}},X={WHITE:" ",ID:"#",QUTO:'"',ATTR:"[",INNER:"{",CHILD:">",CLAZZ:".",SIBLING:"+",BLOCK:"(",BLOCKEND:")",INNEREND:"}",ESCAPE:"\\",aMode:["<tag#.[>#*i*#</tag>","<tag#.[/>"],rVal:/^\s*(.*)$/,rPar:/\({2}(?:((?:(?!\({2}|\|).)+)\|)?((?:(?!\({2}).)+)\){2}/g,rSimply:/^(?:img|link|input|meta|br|hr|area)$/,_default:{"#":[/#/,b,' id="$1"'],".":[/\./,b,' class="$1"'],"[":[/\[/,b," $1"],tag:[/tag/g,"span",w],"{":[/#\*i\*#/g,b,w]},INDEXS:["tag",".","#","[","{"],factory:function(){return{tag:[],".":[],"#":[],"[":[],"{":[]}},toHtml:function(t,e){return this.build(this.xcode(t,0,e).parent)},build:function(t){for(var e,i,n,r=this.aMode[+this.rSimply.test(t.tag.join(b))],s=this._default,o=this.INDEXS,a=0,u=0,c=o.length;u<c;u++)e=t[n=o[u]].join(b),a||c-u!=1?(i=s[n],r=r.replace(i[0],e?e.replace(this.rVal,i[2]):i[1])):r=e,a+=+!!e;return r},xcode:function(t,e,i,r){for(var s,o,a,u,c,l=this.factory(),f=0,h=this.ID,p=this.ATTR,d=this.INNER,m=this.CLAZZ,v=this.CHILD,g=this.SIBLING,y=this.INNEREND,E=this.BLOCKEND,b=this.BLOCK,R=this.QUTO,k=0,w=!1,N=l[d],C=e,S=t.length;C<S;C++){if(u){C--,u=!1;break}if(k+=-1*+(y==(s=t[C]))||+(d==s),c=l[o=o||"tag"],t[C-1]!=this.ESCAPE)if(s!=R||k)if(w&&0==k&&(w=!1),f%2||w)c.push(s);else switch(!1===a&&c.push(this.WHITE),s){case y:case"]":break;case m:a=!1;case h:case p:case d:s==d&&(w=!0),o=s;break;case v:case g:case b:case E:if(u=s!=v&&v==r||s==E&&C++)break;e=C+1;var A=this.xcode(t,e,n,v);N.push(this.build(A.parent)),s==v&&v==r&&(r=n),C=A.index-1;break;default:a=!0,c.push(s)}else f++,c.push(s);else c.pop(),c.push(s)}return i!=n&&N.push(i),{index:C,parent:l}}};function selector2Html(t){return X.toHtml(t)}var J={};function iAttrs(t,e,i,n){var r;i||(i=C);var s=1!=n?function(t){return o.test(t),css2js(RegExp.$1)}:function(t){return t};if(i==C&&t.dataset)r=t.dataset;else{var o=J[i]||(J[i]=i?new RegExp("^"+i+"-(.+)","i"):/.*/);r=t.attributes;var a,u={};for(var c in r)Object.hasOwnProperty.call(r,c)&&(a=r[c],o.test(a.name)&&(u[s(a.name)]=a.value));r=u}return picker(r,css2js(e||L))}function iSetGetAttr(t,e,i){if(null===i)return 1==t.nodeType&&t.removeAttribute(e);var n=isNil(i),r=I[+!n],s=t[r];if(n){var o=s&&t[r](e)||t[e];return isNil(o)?null:o}s&&isNil(t[e])?t[r](e,i):t[e]=i}function iAttr(t,e,i){var n;if(V(e)){if(isNil(i))return iSetGetAttr(t,e);(n={})[e]=i}else n=e;each(n,function(t,e,i,n){n(i,t,e)},t,iSetGetAttr)}function iFxInnerReplace(t,e,i){return e.toUpperCase()}function css2js(t){return t.replace(m,iFxInnerReplace)}function iSetStyle(t,e,i,r){1==t.nodeType&&(m.test(e)&&(e=css2js(e)),v.test(e)&&(g.test(i)&&(i=iRuner(ot[RegExp.$1],n,RegExp.$2,nt(t,e,A)[e]>>0)),E.test(i)&&(i+=r||k)),t.style[e]=i)}function iCssGetSet(t,e,i){if(V(t))return isNil(e)||v.test(t)&&e==A?isNil(e=isSimplyData(nt(i,t,e),t))?null:e:iSetStyle(i,t,e);each(t,function(t,e,i,n){iSetStyle(i,t,e,n)},i,e)}function iCss(t,e,i){return iCssGetSet(e,i,t)}function merge(t,e,i,n){var r,s,o,a,u;for(s=(u=_.call(arguments)).pop(),u.push(s),/false|true/gi.test(s)||u.push(!1),s=u.pop(),o=u.pop();a=u.shift();)for(r in o)!s&&a.hasOwnProperty&&a.hasOwnProperty(r)||(a[r]=o[r])}function iRuner(t,e){if(isNil(t))return n;var i,r=iList2Array(arguments);t=r.shift(),e=r.shift(),t instanceof Array||(t=[t]);for(var s=0,o=t.length;s<o;s++)if(t[s]instanceof Function&&(i=t[s].apply(e,r))!==n)return i}function giveUHtmlBySelector(t){return t.replace(X.rPar,function(t,e,i){return X.toHtml(i,e)})}function pickByRule(t,e,i,r,s,o,a){var u={};s(i,function(t,e,i,r,s,o,a){s((e=e.split(d))[0].split(l),function(t,e,i,r,s,o,a){var u,c;if(!isNil(t=i[e]))return o&&(u=K[o])&&(t=u(t)),c=iRuner(a,n,r||e,t),s[r||e]=isNil(c)?t:c,!0},r,e[1],i,o,a)},u,e,s,o,a),r.push(u)}function picktype(t){return iTypeTo(t).replace(c,w)}var Y=picktype(M);function isNil(t){return t===n}function isFunction(t){return t instanceof Function}function MS(t,e,i){isFunction(e)||(e=function(){}),t.forEach(function(t,i){e.call(this,i,t)},this)}var tt={changeWay:function(t,e,i,n){return e[0]=t,e[1]=i[t],!isNil(this.ret=n.apply(this.context,e))},Array:function(t,e,i){for(var n=0,r=t.length>>0;n<r;n++)if(tt.changeWay.call(this,n,i,t,e))return this.ret},Object:function(t,e,i){for(var n in t)if(t.hasOwnProperty&&t.hasOwnProperty(n)&&tt.changeWay.call(this,n,i,t,e))return this.ret},Set:MS,Map:MS};function each(t,e,i){if(isFunction(e))return(tt[picktype(t)]||tt[Y]).call({context:i},t,e,iList2Array(arguments))}tt.NodeList=tt.Array;var et={},it=0;function picker(t,e,i,n){if(e==L)return t;if(!V(e)||isNil(t))return{};var r=[],s=!0;return t instanceof Array||(t=[t],s=!1),each(t,pickByRule,e.split(p),r,each,i,n),s?r:r.pop()}each("offset,inner".split(p),function(t,e,i){i[e]=t,it++},et);var nt=document.defaultView?function(t,e,i){return picker(1==t.nodeType?document.defaultView.getComputedStyle(t,b):{},e||L,i)}:function(t,e,i){return picker(t.currentStyle,e||L,i)};function Query(t,e){if(t instanceof Query)return t;if(!isNaN(+t))return this;var i=new Selector(t,e,!0);this.result=i.result,this.length=this.result.length,this.animateTasks=[],iDefineProperty(this,0,{get:function(){return this.result[0]}},this)}var rt=/^<(\w+)\s*([^>]*)(?:\/|>((?:(?!\<\/\1)[\w\W])*)<\/\1|)>$/,st=/<\w[^<\>]*>/i;function Selector(t,e,i){var r;V(t)&&(!0===e&&(t=t.buildHtml(!0))||st.test(t))?r=function iSelectorOrHtmlstring2Element(t){var e=rt.test(t),i=function iCreateElement(t){return document.createElement(t||S)}(e?RegExp.$1:0);if(e){var n=RegExp.$2,r=RegExp.$3;return iString2KeyValue(n,function(t,e){this[t]?this[t](e,this._,!0):this.$(this._,t,e)},{"class":iClass,$:iAttr,_:i}),iHtml(i,r).result}return i.innerHTML=t,iList2Array(i.childNodes)}(t):(e||(e=this.result),r=t instanceof Array?t:1==t.nodeType||9==t.nodeType||iTypeTo(t)==U?[t]:function iQuerySelectorByString(t,e,i){var r,s;e!=b&&V(e)&&(e=Selector.call(this,e,n,i));if(e&&q(r=e.result||e))each(r,function(t,e,n,r,s){e=iList2Array((e=Selector.call(n,s,e,i)).result),r.push.apply(r,e)},this,s=[],t);else{e||(e=document);var o=D[+!!i];/^[^.\[#]/.test(t)&&(t=t.replace(/^((?:>|\+|~))/g,"*$1")),s=e[o]?e[o](t):[]}return s}(t,e,i));return this.result=r,this}function iExecSimply(t,e,i,r,s){return t.each(function(t,i,s,o,a,u){return u?iRuner(r,n,e,s,i,a,u,s):o(e,r,i,a,u,s)},i,s,t,V(e))}var ot={};each(["+","-","*","/"],function(t,e,i){i[e]=new Function("to","cur","return +cur"+e+" +to;")},ot);var at={};function rClassInElement(t,e){e||(e=b);var i=t+e;return at[i]||(at[i]=new RegExp("(?:(?:^|\\s+)"+t+"(?:s*$|(\\s)+))",e||"g"))}function iClass(t,e,i){if(e&&1==e.nodeType){var r={clazz:e.className};each(t.split(/\s+/),function(t,e,r,s){if(e!=b){s=rClassInElement(e);var o=r.clazz;i!=n?o.search(s)<0&&(r.clazz=(o==b?b:o+" ")+e):r.clazz=o.replace(s,w)}},r),e.className=r.clazz}}function iHtmlOrAppend(t,e,i,n,r){each(t,function(t,e,i,s,o){var a;1==i.nodeType&&(i=[i]),(r&&(a=[i])||q(a=i)||i instanceof Query&&(a=i.result)||V(i)&&(a=iQuery(i).result))&&(1!=n&&(e[iContent4Element(e.tagName)]=b),o(a,function(t,e,i,n){n(i,e)},e,s))},e,i||new Function,each)}var ut="["+N+"]";function iRemoveEvent(t,e){var i;!0===e?(i=t,e=n):(i=t.find(ut),Array.prototype.unshift.apply(i.result,t.result)),i.each(function(t,e,i,n,r){var s=i(e),o=n.events[s];r(o,function(t,e,i,n,r){delete r[t],n(e,function(t,e,i,n){ft.removeEventListener(i,n,e)},i,t)},e,r,o),delete n.events[s]},iGetEventMark,t,each),t.each(e)}var ct={};function isSimplyData(t,e){var i;return ct[e]==n&&p.test(e)?t:t[i=ct[e]||(i=e.split(d),ct[e]=i[1]||i[0])]}var lt={".":function(t,e){return rClassInElement(t,"i").test(e.className)},"[":function(t,e){return null!=iAttr(e,t)},"#":function(t,e){return e.id==t},tag:function(t,e){return t.toUpperCase()==e.tagName},"{":function(){return!1}};function iElementsIs(t,e){var i;if(!/\s+/.test(e)){i=[];var r=[];each(X.xcode(e,0).parent,function(t,e,i){e.length&&i.push(function(t,e){return!0===(e=iRuner(this,n,t,e))?n:e}.bind(lt[t],(t==R&&e.shift(),e.join(b))))},r),each(t instanceof Array?t:[t],function(t,e,i,r){isNil(iRuner(i,n,e))&&r.push(e)},r,i)}return i}function iElementIs(t,e){return iElementsIs(e,t).length?e:n}function iPackHtml(t){var e,i=this.result;return isNil(t)?(e=i[0])&&e[iContent4Element(e.tagName)]:(iHtmlOrAppend(i,t,function(t,e){var i=iContent4Element(t.tagName);e.nodeType&&t.appendChild(e)||(t[i]=e)},!1,V(t)||!isNaN(+t)),this)}function AnimateTask(t,e){this.rank=t,this.args=e}function iRanks(t,e,i,r,s,o,a,u){each(s,function(t,e,i,r,s,a,u){++u.count;var c,l,f=nt(i,t,A)[t]>>0,h=(c=g.test(e)?iRuner(ot[RegExp.$1],n,RegExp.$2,f):e)-f;if(0==h||isNaN(h))return iSetStyle(i,t,c),u.count--;var p=setInterval(function(){var e;if((l=Date.now()-a)>=o&&(clearInterval(p),l=o,u.count--,0==u.count&&(iRuner(s),r.animateTasks.shift(),(e=r.animateTasks).length>0)))return e[0].run();iSetStyle(i,t,f+h*l/o)},13)},e,r,a,Date.now(),u)}function iGetDataByLine(t,e,i){var r=e,s=t.split(R),o=s.pop();return each(s,function(t,e){(r[e]||(r[e]={}))&&(r=r[e])}),i==n?r[o]:r[o]||(r[o]=i)}function iGetEventMark(t){var e=iAttr(t,N);return e||iAttr(t,N,e=++u),e}function iEvent(t){return function(e){return each(this.result,function(t,e,i,n,r,s,o){P&&(n=function iEEventTrigger(t,e){var i=picker(e,z);merge(i,e),iRuner(t,this,i)}.bind(e,n));var a=r.events;iGetDataByLine(s(e)+"."+i,a,[]).push(n),ft.addEventListener(e,i,n),o(T,e,!0)},t,e,this,iGetEventMark,iClass),this}}function iDefineProperty(t,e,i,n){try{Object.defineProperty(t,e,i)}catch(r){t[e]=iRuner(i.get,n)}}Query.prototype={events:{},html:iPackHtml,attr:function(t,e){return iExecSimply(this,t,e,function(t,e,i){return iSetGetAttr(i,t,e)},each)},css:function(t,e){return iExecSimply(this,t,e,iCssGetSet,each)},is:function(t){return iElementsIs(this.result,t).length>0},find:function(t){var e=new Query(t,this.result);return e.length=Array.prototype.unshift.apply(e.result,iElementsIs(this.result,t)),e},addClass:function(t){return this.each(function(t,e,i,n){n(i,e,!0)},t,iClass)},removeClass:function(t){return this.each(function(t,e,i,n){n(i,e)},t,iClass)},remove:function(){return iRemoveEvent(this,function(t,e){e.parentNode&&e.parentNode.removeChild(e)}),this},append:function(t){return iHtmlOrAppend(this.result,t,function(t,e){t.appendChild(e)},!0),this},appendTo:function(t){return new Query(t).append(this.result),this},data:function(t,e){return this.length?this.each(function(e,i,n,r,s,o,a){var u=o(n(i,r,s),t);return!isNil(t)&&a.test(u)?JSON.parse(u):u},iAttrs,t,e,isSimplyData,/^(?:\[.*\]|{.*})$/):n},stop:function(){return this},unbind:function(){return iRemoveEvent(this,!0),this},animate:function(t,e,i){e||(e=600);var n=this.animateTasks;return n.push(new AnimateTask(this.result,[this,t,e,i])),1==n.length&&n[0].run(),this},on:function(t){return iEvent(t)},trigger:function(t){return this.each(function(t,e,i){try{var n=document.createEvent("Events");n.initEvent(i,!0,!0),e.dispatchEvent(n)}catch(r){document.all&&e.fireEvent("on"+i)}},t)},each:function(){var t,e=iList2Array(arguments);return e.unshift(this.result),isNil(t=each.apply(this,e))?this:t}},Query.prototype.val=Query.prototype.html,Query.prototype.off=Query.prototype.unbind,AnimateTask.prototype.run=function(){var t=this.args;t.unshift.call(t,this.rank,iRanks,this),t.push({count:0}),each.apply(this,t)},each(["hide","show"],function(t,e,i){i[e]||(i[e]=function(){return this.each(function(t,e,i){var n="hide"==i,r=n?iCss(e,"display"):iAttr(e,"o-display");n&&(iAttr(e,"o-display",r),r="none"),iCss(e,{display:r||b})},e)})},Query.prototype);var ft={};each({addEventListener:["addEventListener","attachEvent"],removeEventListener:["removeEventListener","detachEvent"]},function(t,e,i,n,r){var s=+!i[t];n[t]=function(t,i,n,o){t[e[s]](r[s]+i,n,o)}},global,ft,["","on"]),each(["resize","click","focus","blur","change","scroll","load","hashchange","error","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup","mousewheel","keydown","keypress","keyup","touchcancel","touchend","touchmove","touchstart","animationend","animationiteration","animationstart"],function(t,e,i){iDefineProperty(i,e,{get:function(){return iEvent(e)}})},Query.prototype);var ht=iQuery(o);ht.css({height:"100%"});var pt=/\s*([^=&#?]+)=(?:("|')((?:(?!\2).)*)\2|([^=&]*))/g;function iString2KeyValue(t,e,i){var n={};return each(t.match(pt),function(t,e,n,r,s){e.search(r)>=0&&(t=RegExp.$1,isNil(e=RegExp.$3||RegExp.$4)||(n[t]=e,iRuner(s,i,t,e)))},n,pt,e),n}function $pickWidthHeight(t){return t||(t=ht),{width:t.attr(x),height:t.attr(H)}}var dt=$pickWidthHeight(),mt=ht.css("overflow");function Dialog(t){this.id=r++,this.link=n,this.offset={},this._close_=[],this._resize_=[],B[this.id]=this,merge(this,t),W.push(this),t.root.attr({id:this.id}),this.bind(),this.events={click:{}},this.isOwnSetting=iRuner(this.callback,B,this.id,this)}function $resize(t){iRuner(t._resize_,t)||iRepainting(t)}function iRepainting(t,e){var i=function $center(t,e,i,n){var r=iQuery(t),s=!n&&i.isOwnSetting?{}:Z.trigger(e,$pickWidthHeight(r.room||r),dt);return s.zIndex=10,s.position=F,r.css(s),dt}(t.room,t.position,t,e);i.left=i.top=0,t.bg.css(i)}Dialog.prototype={tips:i.exports.tips,onresize:function(t){return this._resize_.push(t),this},onclose:function(t){return this._close_.push(t),this},remove:function(t){return this.link instanceof Dialog&&this.link.remove(),iCurrent(t||this),this},resize:function(t){var e=this;return iLazyRun(function(){$resize(e)},t),e},glass:function(t){this.root.attr("is-blur",+t),ht[t?"addClass":"removeClass"]("blur")},addClass:function(t){return this.root.addClass(t),this},removeClass:function(t){return this.root.removeClass(t),this},timer:function(){if(+this.timeout){var t=this;t.times=setTimeout(function(){t.remove()},1e3*this.timeout)}},push:function(t,e,i){return iGetDataByLine(t+R+e,this.events,[]).push(i),this},click:function(t,e){return this.push("click",t,e),this},proxy:function(t,e){var i=u++;return t instanceof Query?t.attr(Et,i):iAttr(t,Et,i),this.onclose(function(t){this.events.click[t]=null}.bind(this,i)),this.click(i,e)},destroy:function(){var t=this;t.cleartime(),t.bg.stop(!0,!0).animate({opacity:.1},10);var e={css:{top:"-=25px",opacity:.5},speed:400};merge(e,t.destroyConfig,!0),t.room.stop(!0,!0).animate(e.css,e.speed,function(){iRuner(t._close_,t),s--,t.root.remove(),delete B[t.id],s<=0&&ht.css({overflow:mt}),+t.root.attr("is-blur")&&t.glass(),each(t,function(t){this[t]=null},t)})},cleartime:function(){clearTimeout(this.times)},bind:function(){this.room.find("[data-bind]").each(function(t,e,i){iDefineProperty(i,iAttr(e,"data-bind"),{get:function(){return iQuery(e,this.root)}},i)},this)},runer:iRuner};var vt=selector2Html("div.windows>div.content+div.bg"),gt=selector2Html("div.confirm>div.confirm-title{标题}+div.confirm-content{内容}+span.confirm-cancel{取消}+span.confirm-submit{确定}+span.confirm-cancel.close{×}"),yt=selector2Html("span.close{×}");String.prototype.buildHtml=function(t){return t?selector2Html(this):giveUHtmlBySelector(this)};var Et="e-dialog-handle";function iDialog(t,e,i,r,o){var a,u=iList2Array(arguments),c=u.shift();isFunction(c)||(a=c,(c=u.shift())||(c=new Function));var l=iQuery(vt),f=l.find(">.content"),h=l.find(">.bg");f.html(a),ht.css({overflow:"hidden"});var p={position:F,top:0,left:0,zIndex:1e5};l.css(p),ht.append(l),s++,r instanceof Query&&(r=r[0]);var d=!V(r)&&r&&1==r.nodeType,m=new Dialog({bg:h,room:f,root:l,callback:c,position:d?n:r,timeout:i});if(l.click(function(t){var e=function iFindEventParent(t){for(var e={};t;){if(handle=iAttr(t,Et)){e.name=handle,e.target=t;break}t=t.parentNode}return e}(picker(t,z).target);iRuner(m.events.click[e.name],e.target,t)}).removeClass(T),d){var v,g;o&&iTypeTo(o)==G&&(v=o.slow,g=o.position),+v&&f.hide(),f.addClass("windows-freely"),f.append(X.toHtml(".i-mark"));var y={index:1,offset:10,room:f,target:r,position:g,iMark:f.find(".i-mark")};m.onresize(function(){return m.bg.css(dt),function iResize(){var t,e,i=this.target.getBoundingClientRect(),r=this.room,s=this.index,o=this.offset,a=this.iMark,u=r.attr(H),c=r.attr(x)+o,l=i.height;l=(l==n?i.bottom-i.top:l)>>0;var f=i.width;f=(f==n?i.right-i.left:f)>>0;var h={},p={},d=i.top+l,m=i.left+f;r.removeClass(bt[s]);var v=dt.width-m-o>c,g=dt.height-d>u,y=this.iMarkHieght||(this.iMarkHieght=a.attr(H));if(p.top=b,!this.position&&g&&u>Rt)s=3,t=d+y/2,h.left=i.left;else{if(t=i.top-u-y/2,e=v?m+o:i.left-c,t<0&&(v||e>0)){s=v?2:0;var E=i.top-10,R=dt.height-u;(t=Math.min(E,R))<0&&(t=0),p.top=Math.abs(i.top-t)+l/2}else s=1,e=i.left;h.left=e}this.index=s,r.addClass(bt[s]),h.top=Math.max(t,0),a.css(p),r.css(h)}.call(y),!0}),iLazyRun(function(){f.show(),m.resize()},v)}else O.auto.mix.animate(m,!m.isOwnSetting);return m.timer(),P&&iQuery("body").append(l),m}var bt=["i-s-left",b,"i-s-right","i-s-bottom"],Rt=50;function iLazyRun(t,e){return+e?setTimeout(t,e):iRuner(t)}function iCurrent(t){var e;if(t){for(var i=s;i--;)if(W[i]===t){W.splice(i,1),e=t;break}}else e=W.pop();e&&e.destroy()}function iUserWindowResize(){for(var t in dt=$pickWidthHeight(),B)$resize(B[t])}function iQuery(t,e){return t instanceof Query?t:new Query(t,e)}function iHtml(t,e){var i={};return i.result=t instanceof Array?t:[t],iPackHtml.call(i,e)}iQuery(window).resize(iUserWindowResize).keydown(function(t){27===t.keyCode&&iCurrent()});var kt={is:iElementIs,css:iCss,each:each,attr:iAttr,html:iHtml,merge:merge,url2kv:iString2KeyValue,attrs:iAttrs,show:iDialog,list:B,runer:iRuner,picker:picker,showBox:iDialog,between:function between(t,e,i){var n,r;V(t)&&t.search(h)>=0&&(t=RegExp.$2,e=RegExp.$3),+t<+e?(n=+t,r=+e):(n=+e,r=+t);for(var s=r-n+1;s--;)iRuner(i,null,n+s,r,n)},isString:V,getline:function pickVarLine(t,e){var i,n,r=e[t],s=t;if(r)i=r,n=null;else{var o=t.split(R);n=(s=o[0])in e?e:global;for(var a=0,u=o.length;a<u;a++)(i=n[o[a]])&&a!=u-1&&(n=i)}return r={head:s,data:i,parent:n}},resize:iUserWindowResize,selector2Html:selector2Html,giveUHtmlBySelector:giveUHtmlBySelector,confirm:function(t,e,i,n){return this.auto(gt,function(n,r){r.glass(!0);var s=r.room;s.find(".confirm-title").html(t),s.addClass("dialog-confirm").find(".confirm-content").html(e),r.proxy(s.find(".confirm-cancel"),function(){return r.remove(),!1}),r.proxy(s.find(".confirm-submit"),function(t){return iRuner(i,r.root,kt,r,t)&&r.remove(),!1})},n)},notice:function(t,e,i,n,r){var s=this.tips(t,e,i,n);return s.addClass(r||"notice"),s},error:function(t,e,i,n){return this.notice(t,e,i,n,"error")},tips:function(t,e,i,n){return e>7&&(t+=yt),iDialog(giveUHtmlBySelector(t),function(t,i){i.root.addClass("dialog-tips"),iRuner(n,i),i.proxy(i.root.find(".content .close"+(e>7?b:",.bg")),function(){i.remove()})},e,i||kt.tips_position)},auto:function(t,e,i){var r;!isFunction(e)&&isNil(i)&&(e=(i=e)&&i.callback),V(i)?(r=i,i={}):(i||(i={}),r=i.cs),r||(r="inner: 0 0 0 0 .confirm-content 60;");var s=iDialog(t,function(t,n){return n.runer(i.init,n,t),n.runer(e,this,t,n),n.bind(),n.runer([i.last,i.end],n,t),n.onresize(resize),!0},n,i.position);s.destroyConfig=i.destroy;var o=function dialogAutoRules(t,e){return!e&&(e=[]),each(t,function(t,e,i,r,s,o,a,u){(u=(s=e.split(f))[0])&&(a=(s[1]||b).split(/\s+/)).length>=1&&(i[t]={name:u,value:a,sort:r[u]==n?it:r[u]})},e,et),e}(r.split(l));o instanceof Array&&o.sort(function(t,e){return t.sort-e.sort}),i.destroy&&isNil(i.center)&&!/center/.test(i.position)&&(i.center=!1),s.isFree=!1===i.center||y.test(r);var a=s.room.hide();function resize(t){this.is1st=!!t;each(o,function(t,e,i,n,r){e.value[0]instanceof Dialog||e.value.unshift(r),i[e.name]&&i[e.name].apply(n,e.value)},O.auto.mix,{},this),iRepainting(this,!this.isFree)}return iLazyRun(function(){a.show(),resize.call(s,!0),iRuner(i.end||function(){O.auto.mix.animate(this,!0)},s)},i.slow),s},push:function(t,e,i){return(O[t]||(O[t]={mix:{}})).mix[e]=i,this},remove:function(t,e){V(t)?iQuery(t).each(function(t,e){var i=iAttr(e,"id"),n=B[i];n&&n.remove()}).remove():iCurrent(t)},screen:function(){return dt},clazz:function(t,e,i){iClass(e,t,!0===i?i:n)},addClass:function(t,e){iClass(e,t,!0)},removeClass:function(t,e){iClass(e,t)},within:function(t,e){for(var i=e;i&&iElementIs(t,i)==n;)i=i.parentNode;return i},query:iQuery,Query:iQuery,createElement:function(t){return iQuery(t,!st.test(t)||n)}};function isNumber(t){return!isNaN(+t)}function iPaddings(t){return t.paddings||(t.paddings=t.css($,A))}kt.push("auto","offset",function(t,e,i,n,r){var s=iPaddings(t.room);e==n&&i==r||(t.isFree=!0),isNumber(i)&&(this.top=i>>0),isNumber(e)&&(this.left=e>>0),this.width=dt.width-(this.left>>0)-(n>>0)-s.l-s.r,this.height=dt.height-(this.top>>0)-(r>>0)-s.t-s.b,t.room.css(this)});var wt=[x,H,x,H];kt.push("auto","inner",function(t,e,i,r,s,o,a,u){var c,l=t.room;/^(?:true|false)$/.test(a)&&(u=a,a=n);var f="true"!=u;(c=l.inneroffset)||(l.iDefaultPadding={l:0,t:0,r:0,b:0},c=l.inneroffset={},each([e,i,r,s],function(t,e,i,n,r){if(isNumber(e))n[r[t]]=e>>0;else{var s=l.find(e),o=iPaddings(s),a=function iMargins(t){return t.margins||(t.margins=t.css($.replace(/padding/g,"margin"),A))}(s);n[r[t]]=s.length?a.t+a.b+o.t+o.b+(s.attr(i[t])>>0)>>0:0}},wt,c,"l,t,r,b".split(",")));var h={},p=iPaddings(l),d=l.iINNER||(l.iINNER=l.find(o)),m=l.is(o)?l.iDefaultPadding:iPaddings(d),v=d.attr("scrollHeight")>>0,g=dt.height-(a>>0),y=dt.width-(a>>0),E=l.attr("scrollWidth")>>0,b=c.t+c.b+p.t+p.b+m.t+m.b,R=y-(p.l+p.r+c.l+c.r+m.l+m.r),k=(this.height||g)-b;h.width=y>=E&&f?"auto":R,h.height=v+b>g?Math.min(v,k):f?"auto":k,d.css(h)}),kt.push("auto","center",function(t,e){/^true$/.test(e)&&iRepainting(t,!0)}),kt.push("auto","animate",function(t,e,i,r){if(/^true$/.test(e)){if(iRepainting(t,t.isFree==n||!t.isFree),t.is1st!=n&&!t.is1st)return;t.room.stop(!0,!0).css({top:i||"+=10"}).stop(!0,!0).animate({top:r||"-=10",opacity:1})}}),i.exports=kt});
!function(t,r){if(t.global=t,"object"==typeof exports)r(require,exports,module);else if("function"==typeof define)define("areain",r);else{t.require||(t.require=function(r){return t[r]});var e={exports:{}};r(t.require||function(t){alert('需要实现 require(),加载模块:"'+t+'"')},e.exports,e),t.areain=e.exports}}(this,function(t,r,e){function area(){this.__=this}function copys(t,r){return area.__key_=t,area.__val_=r,!0}var n={"=":function(t,r,e){return this.__(t,r)===e&&copys(r,e)},"":function(t,r,e){var n=t.getAttribute&&null!==t.getAttribute(r);return n&&copys(r,this.__(t,r)),n},__:function(t,r,e){return t.getAttribute&&t.getAttribute(r)}},a="",s={".":function(t,r){this[r]||(this[r]=new RegExp("(?:\\s|^)"+r+"(?:\\s|$)","i"));var e=this[r].test(t.className);return copys("class",r),e},"#":function(t,r){return copys("id",r),t.id===r},"":function(t,r){return copys("tag",r),t.tagName===r.toUpperCase()},run:function(t,r,e,u,i,o){var c=e&&s[r||a](t,e),f=u&&n[i||a](t,u,o);return e&&u?c&&f:c||f}},u=/(?:\s|,|\||^)(#|\.)*([\w-]+)*(?:\[([\w-]+)(?:([\!]?\=)['"]([^'"]*)['"]|)\])*/g;function Query(t){var r=[];return t.replace(u,function(t,e,n,u,i,o){return(n||u)&&r.push([s.run,e,n,u,i,o]),a}),r}function T(){this.__=this}function run(t,r,e){var n=(r=r.slice()).shift()||T;return r.unshift(t),n.apply(e,r)}var i={};function is(t,r){var e;copys(null,null);for(var n=t.length;n--&&!(e=run(r,t[n],i)););return e}area.within=function(t,r){var e=Query(t);for(copys(null,null);r;){if(is(e,r))return r;r=r.parentNode}return r},area.is=function(t,r){return function more(t,r){for(var e=t.split(/\s*,\s*/g),n=0,a=e.length;n<a;n++)if(is(Query(e[n]),r))return r;return null}(t,r)};var o={};function classX(t,r,e){if(r&&1==r.nodeType){var n;n=t in o?o[t]:o[t]=new RegExp("(?:(?:^|\\s+)"+t+"(?:\\s+|$|\\s{2,}))","g");var a=r.className;e!=undefined?a.search(n)<0&&(r.className=a+" "+t):r.className=a.replace(n," ")}}area.addClass=function(t,r){classX(t,r,!0)},area.removeClass=function(t,r){classX(t,r)};var c=["addClass","removeClass"];area.clazz=function(t,r,e){area[c[+!!r]](t,e)};var f=/-([a-z])/g,l=/([A-Z])/g,p="-$1";function $css2js(t){return t.replace(f,function(t,r,e){return r.toUpperCase()})}var v=["getAttribute","setAttribute"];function $attr(t,r,e){var n=e===undefined,a=v[+!n];return t[a]instanceof Function?n?t[a](r):void t[a](r,e):$attr.attr.call(t,r,e)}$attr.attr=function(t,r){if(r===undefined)return this[t];this[t]=r},area.attrs=function $attrs(t,r,e){var n;n=t.getAttributeNames instanceof Function?t.getAttributeNames():t.getAttributeNames||t.attributeNames||function getKeys(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}(t);for(var a,s=new RegExp("^"+r+"-(.+)","i"),u=1!=e?function(t){return s.test(t),$css2js(RegExp.$1)}:function(t){return t},i={},o=0,c=n.length;o<c;o++)a=n[o],s.test(a)&&(i[u(a)]=$attr(t,a));return i},area.attr=$attr,area.css2js=$css2js,area.js2css=function $js2css(t){return t.replace(l,p).toLowerCase()},e.exports=area});
!function(e,t){if(e.global=e,"object"==typeof exports);else if("function"==typeof define)define("model",t);else{e.require||(e.require=function(t){return e[t]});var n={exports:{}};t(e.require||function(e){alert('需要实现 require(),加载模块:"'+e+'"')},n.exports,n),e.Model=n.exports}}(this,function(e,t,n){var i,r=e("mode"),a=e("dialog"),s=2019516,o="",c="string",l=Object.prototype,u=".default",d="ONSHOWMARK",h="#n_o_t#",f="@data",p="@link",v="@config",m="@selected",g="SEL_LAST_CHECK";function isNil(e){return e===i}function is(e){if(typeof e==c){var t=new RegExp("^\\[object "+e+"\\]$");return function(e){return t.test(l.toString.call(e))}}return function(t){return t instanceof e}}var y=is("(?:Number|Boolean|Null|String|Undefined)"),k=is("String");function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var x="height",M="number",w="overflow",_="hidden",b="_overflow__",S="scrollHeight";function onshow(e,t){var n,i=7,r=(e.previousElementSibling||e.previousSibling).getBoundingClientRect(),s=a.screen(),c=s.height-r.top-r.height,l=c<r.top,u=t.configs();if(n=u.overflow&&a.within(u.overflow,t.context)){u[b]=n;var d=a.css(n,x,M),h=a.attr(n,S);if(a.css(n,w,_),d<=h){var f=n.getBoundingClientRect&&n.getBoundingClientRect();f&&(i+=l?f.top:s.height-f.bottom)}}a.css(e,{"max-height":(l?r.top:c)-i,"margin-top":l?-Math.min(r.top+r.height-i,r.height+e.scrollHeight):o}),a.clazz(t._room,"i-select-up",l)}var C=[function(e){return e[this]},function(e){return this.on(e)}],E=[function(e,t,n){return n[e]in t?"default":o},function(e,t,n){var i=0;for(var r in t)if(t.hasOwnProperty(r)){if(n[r]!=t[r]){i=-1;break}i++}return i>0?"default":o},function(e,t,n,r){return r[e]in t?"default":n===i&&!0===r["default"]?"default":o},function(e,t,n){return!1===a.each(t,function(e,t){if(t!=this[e])return!1},n)?o:"default"}],I=r.dom,z=I.query;function Model(e){e||(e={});a.merge(e,{$this:this,deps:[],context:"body",mode:o,click:{},events:{},modeFx:{}}),this.context=e.context,this.mode=e.mode instanceof r?e.mode:new r(e.mode),this[v]=e,a.merge(this.mode,e.modeFx),a.runer([e.init,e.create,e.end],this,e),this.Mark=0}Model.prototype.done=function(){var e=this;a.query(e.context).click(function(t){if(a.within(e.mark,t.target)==this){var n=a.within("[event-model-handle]",t.target),i=e.configs();n&&(a.runer(i.click[a.attr(n,"event-model-handle")],e,n,i),e.Mark++)}})},Model.prototype.configs=function(){return this[v]},Model.prototype.toString=function(){},a.merge(Model.prototype,{merge:a.merge,isEmpty:isEmpty,dialog:a,MODE:r,require:e,put:function(e,t){(function put(e,t,n){var i=this.configs()[e];isEmpty(i)||t in i||(i[t]=n)}).call(this,"click",e,t)}}),Model.merge=a.merge,Model.isEmpty=isEmpty,Model.prototype.declare=function declare(e,t,n){n=n||this;var i=e.split("."),r=0;for(;e=i[r++];)if(e in n){if(n=n[e],y(n)){debug("%c"+e+" 's type not Object! need Object {} ","color:red");break}}else n=n[e]={};return a.merge(n,t),n};var j=new r('<div class="formbox radio-box" id="{id}">{inner}</div>'),N='<label class="{?type()?} {?cur({this})?}" event-model-handle="some" data-key="{val}" data-group-id="{?group({this})?}"><span class="el-i"><i></i></span><span class="el-name">{name}</span></label>';var q='<div id="{id}" class="select-box{?IF({multi}, " multi", "")?}"><div class="select-title">{?{sname}||""?}</div><div class="select" event-model-handle="click">{?{multi}?\'<span class="count hide"></span>\':""?}<div class="selected"><div class="item select-info" index="-1">{?{tips}||"::请选择::"?}</div></div><div class="select-item"><Items class="item {?clazz({this});?}" event-model-handle="info" index="{$index}">{?showname({this})?}<span class="select-close" event-model-handle=init>×</span></Items></div><div class="shadow-bg"></div></div>{?{bind}||{childs}||{child}||""?}</div>';function iSelectInFinish(e,t){if(t.linkMark==o||(e=t.linkMark?a.getline(t.linkMark,e):e instanceof Array?{data:e}:e.data),!e.data||!e.data.length)return!1===t.tips||a.notice("数据列表((空|.mark))!",3,"center top").addClass("hide-bg");this[f]=e.data,this.mode.components.Items.$data(e.data),t.click.info.call(this,u,t,!0),this.done()}var A={create:function(e,t){if(k(e)&&(e=z(e)),isNil(t))return e.innerHTML=o;if(k(t)){var n=I.createElement();n.innerHTML=t;var i=n.children;if(i.length)for(var r=0,a=i.length;r<a;r++)I.append(e,i[0])}else I.append(e,t instanceof Array?t[0]:t);return e}};function $default(e,t,n){var r;if(k(t)){var s=z(t,e.context,!0),o=s.length;for(r=o;o-- >0;)a.runer(n,i,e,s[o])}else a.runer(n,i,e,t),r=e.selectCount;return r}Model.prototype.show=function(){var e=z(".count",this.context);e&&(this.selectCount&&(e.innerHTML=this.selectCount),a.clazz(e,"hide",!this.selectCount))},Model.prototype.isMulti=function(){return this.configs().multi},Model.prototype.selected=function(){return this[m]},Model.prototype.take=function(e,t){if(this.isMulti()){var n=this[m]||(this[m]={});this.selectCount+=2*+!!t-1,isNil(t)?delete n[e]:n[e]=t}else this[m]=t},Model.prototype.parent=function(e){var t;for(e===i&&(e=this);e;)t=(e=(e[v]||{}).parent)||(t||{})[v];return t};var F=/,|\|/g;function iSelectInit(e){var t=this;t.mark=".select-box",t.name=e.name||"none",e.id=t.id="Select"+s++,t.selectCount=0,e.multi&&!e.split&&(e.split=",");var n=e.show_attr,c=n&&/\{[\w-]+\}/.test(n),l=C[+!!c].bind(c?new r(a.giveUHtmlBySelector(n)):n||"name");t.require&&t.require(e.deps,i);var u,d=e.current,f=y(d)||d===i;if(f){var p=d;d={},(p!=i||k(p))&&(p=(p+o).split(F),a.each(p,function(e,t){this[t]=!0},d)),u=E[+!f]}else u=E[3];a.runer(e.add,e,t.mode),a.merge(t.mode,{clazz:u.bind(t,e.trigger_attr||h,d),showname:l});var v=t.mode.on(e),g=t.parent();k(e.context)&&g&&(g.bind||g.child||g.childs)&&(e.context=z(e.context,g.context)),e.append==i||!0===e.append||A.create(e.context);var x=A.create(e.context,v);if(t.context=x=z("#"+t.id,x),t._room=z(".select",x),t._selected=z(".selected",x),t._select=z(".select-item",x),!e.source&&e.url){var M=a.picker(e,"url,type,data,success,error,args");if(!isEmpty(e.parent)&&k(M.data)){var w=e.parent[m]||{};M.data=a.picker(w,M.data)}a.merge(M.data,M.args);var _=M.success;delete M.success;var b=M.error;if(delete M.error,a.merge(M,{success:function(n){a.runer([iSelectInFinish,_],t,n,e)},error:function(n){a.runer(b,t,n,e)}}),e.ajaxRule){var S=[];return a.each(e.ajaxRule.split(/,/g),function(e,t,n,i){n.push(i[t])},S,M),S.unshift(e.ajax,t),a.runer.apply(t,S)}return a.runer(e.ajax,t,M)}a.runer(iSelectInFinish,t,e.source,e)}var L={click:function(e,t){var n=t[d]=!a.within(".cur",e);return a.clazz(e,"cur",!!n),a.runer(t[n?"onshow":"onhide"],this,t.onshow&&this._select,this),n||(t[b]&&a.css(t[b],w,o),a.runer(Select.events.hide,this,this._select),this._selected.scrollTop=0),n},info:function(e,t,n){var r=$default(this,e,function(e,r){!function $click(e,t,n,r){var s;if(t=a.within(".item",t)){e.context;var o=-1,c=!!a.within(".selected",t),l=a.attr(t,"index"),u=a.within(".select",t);if(!r&&c&&!n[d])return n.click.click.call(e,u,n);if(!n.multi){e.selectCount=+!c;var h=e[g];if(h){o=+a.attr(h,"index");var v=e._select;s=I.getChildByIndex(v,o),I.append(v,h,s.child)}h&&a.removeClass("cur",h),e[g]=t,r||(isin=n.click.click.call(e,u,n))}var y=e[f][l];if(e.take(l,c?i:y),e.show(),a.runer([n.after],t,y),e[p]&&e[p].remove(),!c&&n.link&&(n.link.parent=e,e[p]=Select(n.link)),!e.Mark||r===i){var k=e[c?"_select":"_selected"];s=I.getChildByIndex(k,1),I.append(k,t,s.child)}e.Mark?l!=o?a.runer([n.select,n.change,n.onselect,n.onchange],t,y,e[f][o]):l!=o||e[m]||(e[g]=i):a.runer(n.oncreate,e,y)}}(e,r,t,n),a.removeClass(r,"default")});a.clazz(this._room,"select-not-empty",!!r),this.Mark&&this.isMulti()&&onshow(this._select,this)},init:function(e,t){if(e=a.within(".item",e),!this.isMulti()){delete this[m];var n=a.attr(e,"index");a.runer([t.re,t.reload],t,e,this[f][n])&&this.reset()}t.click.info.call(this,e,t,!t.multi||i),delete this[p]}};function Select(e){Model.isEmpty(e)&&(e={}),Model.merge(e,{init:iSelectInit,mode:q,click:L});var t=e.onshow;t instanceof Function?t=[t]:t instanceof Array||(t=[]),t.push.apply(t,Select.events.show),t.push(onshow),e.onshow=t;var n=new Model(e);return n.remove=function(){for(var e,t,n=this;n;)(e=z("#"+n.id))&&I.remove(e),t=n[p],delete n[p],delete n[m],n=t},n.next=function(){return this[p]},n.reset=function(e){for(var t=e||this.configs();t;)t.current=o,t=t.link},n.re=function(){var e=this.configs(),t=z(".selected .select-close",e.context);t&&t.click&&t.click(),this.Mark=0,this.reset()},n.data=function(){return this[m]},n.val=function(e){var t=this.configs(),n=t.split;if(this.isMulti()){var i,r=[],s=t.trigger_attr||"val";return a.each(this[m],function(e,t,n,i,r){n.push(i?t[r]:t)},r,n,s),n?(i=r.join(n),(r={})[s]=i,r):r}for(var c,l,u=this,d=[];u;)(c=u[m]||o)&&(l=t.issame?t:u.configs(),a.runer(e,t,c),c=c[l.trigger_attr]||c.id||c.val,d.push(c)),u=u.next();var h={};return h[t.trigger_attr]=d.join(n||","),h},n.trigger=function(e){var t=this.configs();t.click.info.call(this,z('[index="'+e+'"]',this.select),t,!0)},n}Select.events={show:[],hide:[]},Model.input=function Input(e){Model.isEmpty(e)&&(e={}),Model.merge(e,{group:{},mode:N,init:function(e){this.require&&this.require(e.deps,i),this.id="Radio"+s++,this.mark=".radio-box";var t,n=e.data,r=this.mode;r.group=function(n){return e.name||t},r.type=function(){return e.type||"radio"};var c=e.source||e.current||i,l=y(c),d={},h=e.sep||",";l&&(k(c)?(c=c.split(h),a.each(c,function(e,t,n){n[t]=!0},d)):isNil(c)||(d[c]=i)),r.cur=E[2].bind(this,e.trigger_attr||"val",d,e.source),n instanceof Array||(n=[n]),n[0]instanceof Array||(n=[n]);for(var f,p,v,m=[],g=0,x=n.length;g<x;g++)f=n[g],t=(t=e.name||f.id)==i?g:t,this.declare("group."+t,{id:t,selects:{}},this),p=f instanceof Array?f:f.son,e.showGroup?m.push("<fieldset><legend>"+(f.name||t)+"</legend>"+r.on(p)+"</fieldset>"):m.push(r.on(p));m=m.join(o),this.inner=m,m=j.on(this),(v=a.runer([e.delegate],i,m))&&(m=v);try{!1===e.append&&A.create(e.context,i);var M=A.create(e.context,m);this.context=M=z("#"+this.id,M),this.done(),e.click.some.call(this,u,this.configs())}catch(w){}},click:{some:function(e,t){if(this.Mark!==i&&a.is(".forbidden",e)){var n=this;return n.__tips&&n.__tips.remove(),n.__tips=a.tips("禁止操作",3,e).addClass("black").onclose(function(){delete n.__tips})}$default(this,e,function(e,n){var r=!!a.is(".cur",n),s=/^checkbox$/.test(t.type),o=s&&r,c=s?!o:r;if(a.is("[data-key]",n)){var l=a.attr(n,"data-key"),u=a.attr(n,"data-group-id"),d=e.group[u];if(!d)return!1;if(d.cur!=l&&a.runer(t.events.init,e,l,t))return;if(a.runer([t.onselect,t.onchange],i,l,d.cur,u,!r),d.selects[l]=!0,a.clazz(n,"cur",!o),!c){var h=s||l==d.cur?l:d.cur;!s&&d.target&&a.removeClass(d.target,"cur"),delete d.selects[h]}d.cur=l,d.target=n}})}}});var t=new Model(e);return t.val=function(e){var n=t.group,i=[];return e instanceof Function||(e=function(e,t){this.push(t.selects)}),a.each(n,e,i),1==i.length?i.pop():i},t},Model.select=Select,Model.each=a.each;var $={Input:{val:function(e){var t=a.getline("components.Input.data",this);a.each(t.data,function(t,n){a.runer(e,this,t,n)})}},Select:{val:function(e){a.each(this.Select,function(t,n){t=n.name;var i=n.configs(),r=n.val();r=r[i.trigger_attr]||r.id||r.val,a.runer(e,this,t,r)})},replace:function(e,t,n){t instanceof Array||(t=[t]);for(var i,r,a=n[this._name__]||(n[this._name__]=[]),s=0,o=t.length;s<o;s++)i=t[s],r=e[s]||e[0],i.fillin&&(r=z(i.fillin,r)),i.context=r,a[s]=Select(i)}}};Model.form=function Form(e){var t,n,i=new r(e);for(var a in $)t=$[a],i.push(a,"replace",t.replace),i.push(a,"init",t.init),n=i[a]||(i[a]=[]),t.val instanceof Function&&(n.val=t.val.bind(i));return i},Model.elements=function Elements(e){var t=new r(e);return t.init=function(e){var n=[];a.each(this.components,function(e,t){this.push(e)},n);var i,s,c=n.shift(),l={select:function(e){return e.val()[e.configs().trigger_attr]},input:function(e){return e.val()}},u={Select:{tagName:"span"},Input:{tagName:"input"},Label:{tagName:"label"}},d=[];a.each(u,function(e,t,n){n.push(e),t["@type"]=e.toLowerCase()},d),s=d.join(","),(i=t[c]=[]).val=function(e){a.each(this,function(e,t,n){a.runer(n,this,t.name,a.runer(l[t["@type"]],0,t))},e)};var h=new r("{name}{?+new Date?}"),f=new r("{e};{e.toLowerCase()};E;EL;elements=>{e}");this.push(c,"replace",function(t,n,r){e instanceof Array||(e=[e],a.picker(e)),a.each(n,function(e,t,n){n=n[e]||n[0];var s=a.picker(t,"@type;type;tag;tagName=>type");if("select"==s.type)t.fillin&&(n=r.dom.query(t.fillin,n)),t.context=n,i[e]=Model.select(t);else if("input"==s.type){if(!/^input$/i.test(n.tagName)){a.addClass(n,"label-input");var c=a.Query(n).append('<input/><span class="label-clear">×</span>'),l=c.find("input");c.find(".label-clear").click(function(e){l.val(o)}),n=l[0]}a.addClass(n,"input-simply-text input-style"),n.value=decodeURIComponent(t.value||o),a.attr(n,a.picker(t,"tips=>placeholder")),i[e]={name:t.name,val:function(){return this.value}.bind(n)}}else i[e]={name:t.name,val:function(){return this.value}.bind(n)};i[e]["@type"]=(s.type||o).toLowerCase()},t)});var p=a.picker(e,f.on({e:c})),v={};v[c]={},a.merge(p,v),a.merge(p[c],{hide:!0,tagName:"span",id:function(){return h.on(this)},data:[]}),a.merge(e,p),a.each(a.picker(e,s),function(e,t,n,i,r){var s;s=t instanceof Array?t:t.data,a.each(s,function(e,t,i,r){a.merge(t,r[i]),n.push(t)},e,r),delete i[e]},e[c].data,e,u)},t.val=function(e){a.each(t.components,(e,t,n,i)=>{n[e].val(i)},t,e)},t},n.exports=Model});
!function(t,e){if(t.global=t,"object"==typeof exports)e(require,exports,module);else if("function"==typeof define)define("time",e);else{var r={exports:{}};e(new Function,r.exports,r),t.time=r.exports}}(this,function(t,e,r){function run(t,e){var r=Array.apply(null,arguments);return t=r.shift()||{},((e=r.shift())instanceof Function?e:t[e]||function(){}).apply(t,r)}var n;function T(t){t=t||"YYYY/MM/DD",this._Date=new Date,this.remode(t)}T.prototype.remode=function(t){return this.mode==t?this:(this._r_ampm__.test(t)?(t=t.replace(this._r_ampm__,"ampm"),e=RegExp.$1.split("|")):e=["am","pm"],this.mode=t,this._ampm_list__=e,this._mode_length__=this._ampm_list__.length,this.M=this.mode.match(/(?:MM|hh|DD|mm|ss|YYYY|YY|ampm|24h|12h)/g)||[],this);var e},T.prototype.setTime=function(t){return this._Date.setTime(t),this._Date};var o=Date.now||function(){return new Date};T.prototype._r_ampm__=/\(([^\(\)]*)\)/,T.prototype.getYearShow2=function(t){return t.getFullYear()%100},T.prototype.getHoursTo12=function(t){var e=t.getHours();return e>12?e%12:e},T.prototype.getAmOrPm=function(t){var e=t.getHours();return this._ampm_list__[Math.floor(e*this._mode_length__/24)]},T.prototype.Map={getMonth:1,YY:"getYearShow2",YYYY:"getFullYear",MM:"getMonth",DD:"getDate",hh:"getHours",mm:"getMinutes",ss:"getSeconds","24h":"getHours","12h":"getHoursTo12",ampm:"getAmOrPm"};var i=[function(t){return t},function(t){return String.prototype.replace.call(t,/[\.-]/g,"/")}];function getDayNumberByMonthAndYear(t,e){return(t>6&&t%2==0||t<8&&t%2!=0||2==t&&(e%4==0&&(e%100!=0||e%400==0))-2)+30}T.prototype.date=function(t){if(!/(string)|number/.test(typeof t))return this.setTime(o());if(RegExp.$1){for(var e,r,n=0,a=i.length;n<a;n++)if(e=!isNaN(+(r=new Date(i[n](t))))){t=r;break}e||(t=new Date)}return this.setTime(t)},T.prototype.get=function(t){var e=this.Map[t];return(e in this?this:this._Date)[e]()},T.prototype.fire=function(t){for(var e,r,o=this.mode,i=this.M,a=t==n?this._Date:this.date(t),s=0,p=i.length;s<p;s++)r=(e=this.Map[i[s]])in this,o=o.replace(i[s],run(r?this:a,e,a)+(r?"":this.Map[e]||0));return this.lt10(o)},T.prototype.lt10=function(t){return t.replace(/(?:(\D)|^)(\d)(?!\d)/g,"$10$2")};var a=["一|二|三|四|五|六|日","Mon|Tue|Wed|Thu|Fri|Sat|Sun","月|火|水|木|金|土|日"];function DJson(t){this.data=t instanceof Array?t:[]}DJson.prototype.append=function(t,e,r,o,i){var a={day:t};return e!=n&&(a.month=e),r!=n&&(a.year=r),o!=n&&(a.title=o),i!=n&&(a.cur=i),this.data.push(a)},T.prototype.dates=function(t){var e=this.get("YYYY"),r=this.get("MM")+t+1,n=this.get("DD"),o=+(r>12),i=12*+(r<1);return{year:e=e+-1*+!!i+o,month:r=r%13+i+o,day:Math.min(n,getDayNumberByMonthAndYear(r,e))}},T.prototype.days=function(t,e){var r=this._Date||new Date,n=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),s=r.getDay();t>>0||(t=0);for(var p,h,u,m=((s-(i-1))%7+t+7-1)%7,f=getDayNumberByMonthAndYear(o,n),g=(a[e>>0]||a[0]).split("|"),c=new DJson,_=0;_<7;_++)c.append(g[(_-t+7)%7],void 0,void 0,"title");if(m)for(var d=n-+!(o-1),l=o-1||12,y=getDayNumberByMonthAndYear(l,d),D=m;D-- >0;)c.append(y-D,l,d,"prev");for(var Y=1;Y<=f;Y++)p=c.append(Y,o,n,"current",h=i==Y),h&&(c.data.cur=p-1);if(u=(f+m)%7){n+=+(o+1>=12),o=(o+1)%12;for(var M=1,T=7-u;M<=T;M++)c.append(M,o,n,"next")}return c.data},r.exports=T});
!function(e,t){if(e.global=e,"object"==typeof exports);else if("function"==typeof define)define("time.box",t);else{e.require||(e.require=function(t){return e[t]});var i={exports:{}};t(e.require||function(e){alert('需要实现 require(),加载模块:"'+e+'"')},i.exports,i),e["time.box"]=i.exports}}(this,function(e,t,i){var n=e("mode"),a=e("dialog"),r=e("model"),o=e("time"),s=e("areain"),m="",c=1e4,d=(n.dom.query,'<div class="times"><Title class="month-select"><Month class="title"><span data-name="{#$name()}" event-handle="prev" class="prev-month">◄</span><div class="current-date">{#fire()}</div><span data-name="{#$name()}" event-handle="next" class="next-month">►</span></Month></Title><div id="time"><Time data-index="{$index}" data-name="{#$name()}" {?{title}!="title" ? \'event-handle="month"\': "" ?} class="{?{title} ? "{title}-month {name||""}":"";?}{?{cur}?" cur":""?}">{day}</Time></div><Select class="picker-hour"></Select><Submit class="time-submit" event-handle="{handle}">{inner}</Submit></div>'),u='{year}-{?{month}<10?"0{month}":{month}?}{?{day}==nil? "" : {day}<10?"-0{day}":"-{day}"?}{? {simply}? "" : " {hh||"00"}:{mm||"00"}:{ss||"00"}";?}',l="_cur_index_mark_",h=["year","month","day","hh","mm","ss"],f=[{hh:0,mm:0,ss:0},{hh:23,mm:59,ss:59}];function EN(e,t,i){a.between(e,t,function(e){e<10&&(e="0"+e),i.push({name:e,val:+e})})}var v=[],p=[];EN(0,23,v),EN(0,59,p);var g={data:[]},y={linkMark:"",trigger_attr:"val"};a.each([{name:"hh",sname:"时",source:{data:v}},{name:"mm",sname:"分",source:{data:p}}],function(e,t,i){a.merge(t,y),t.tips||(t.tips=t.sname),i[e]=t},g.data);var x=[function(e,t){var i=[];a.each(e,function(e,t,i,n){n.push(i.mode(t))},t.host,i),t.target.value=i.join(t.sep||",")},function(e,t){t.inner||((t.inner=new n('<Time class="times-simply" hande="{$index}" data-i="{$index}">{?_r.mode({this})?}<span class="time-simply-close">×</span></Time>'))._r=t.host),a.html(t.target,t.inner.on({Time:e}))}];function isInput(e){return/input/i.test(e.nodeName)}function iSetValue(e,t){x[+!isInput(e.target)](t,e)}function iTips(e){var t,i=e.config,n=i.ranks,r=e.iDates.length,o=i.simply?"请选择((时间|.mark))":r>>0?"请选取(([结束]|.mark))时间":"请选取(([开始]|.mark))时间";n instanceof Array||(n=i.ranks=[]);var s=a.notice(o,c,i.target,function(){(t=n.shift())&&t.remove()}).addClass("hide-bg");n.push(s),e.dialog.onclose(function(){s.remove()}),e.dialog.onresize(function(){s.resize()})}var T={month:function(e,t,i){var n,r,o=a.attrs(e),s=this.timeBox.components,m=s[o.name],c=t.simply,d=o.index,u=m.data[d],v=s.Time;r=m[l],(n=v.data[r]).cur=!1,v.data[r]=n,u.cur=!0,v.data[d]=u,m[l]=d;var p=this.iDates;if(c)p[0]=u;else{var g=p.push(a.picker(u,h.join(",")));g>=2?(g>2&&p.shift(),function compare(e,t){return a.each(h,function(e,t,i,n){var a=i[t]-n[t];if(0!=a)return a>0},e,t)}.apply(void 0,p)&&p.push(p.shift()),a.each(p,function(e,t,i,n){i(t,n[e],!0)},a.merge,f),i.remove()):iTips(this),iSetValue(t,p)}},prev:function(e){this.goto(e,-1)},next:function(e){this.goto(e,1)},"time-close":function(e,t,i){var n=this.iDates,a=n[0];this.timeBox.Select.val(function(e,t){a[e]=t}),iSetValue(t,n),i.remove()}};function TimePicker(){var e=this;e.timeRule=new o(m),e.timeShowMode=new n(u),e.timeBox=new r.form(d),e.iDates=[],e.timeBox.fire=function(){var t=e.timeRule.dates(0);return t.simply=!0,delete t.day,e.timeShowMode.on(t)}}var k=/^\s*$/;TimePicker.prototype.mode=function(e){return this.timeRule.fire(this.timeShowMode.on(e))};var w=["shift","pop"];TimePicker.prototype.run=function(e){var t=this;e||(e={}),e.host=t;var i=(e.e||e).target;if(i=s.within(".times-simply[data-i]",i))return i.parentNode.removeChild(i),void t.iDates[w[s.__val_]]();var n=e.target;if(!n)return a.notice("关联((对象|.mark))为空",3);if(!s.is(".writing",n)){t.timeRule.remode(e.mode||t.timeRule.mode),t.config?(a.merge(t.config,e),e=t.config):t.config=e,s.addClass("writing",n);var r=function createSource(e,t){var i,n=e.timeRule,r=t.target,o=t.simply;o&&r&&(i=r.value)?n.date(i):n.fire(+new Date),isInput(r)&&k.test(r.value)&&(e.iDates.length=0),e.days=e.timeRule.days(1);var s={Title:{Month:{data:[n]}},Time:{data:e.days}};if(e.timeBox.components.Time[l]=e.days.cur,o){a.each(g.data,function(e,t){t.current=n.get(t.name)});var m=e.iDates;m.length||m.push(e.days[e.days.cur]),s.Select=g,s.Submit={data:{inner:"确定",handle:"time-close"}}}return s}(t,e);t.dialog=a.show(t.timeBox.on(r),function(i,r){var o=r.room;r.addClass("times-picker"),o.click(function(i){var n=i.target;(n=s.within("[event-handle]",n))&&a.runer(T[s.__val_],t,n,e,r)}),r.bg.click(function(){r.remove()}),r.onclose(function(){s.removeClass("writing",n)})},null,n,{slow:300}),iTips(t)}},TimePicker.prototype.goto=function(e,t){var i=a.attrs(e),n=this.timeBox.components,r=this.timeRule,o=n.Title,s=n.Time,m=r.dates(t);r.date(this.timeShowMode.on(m)),(i=o.components[i.name]).$observer(!0).data=[r];var c=r.days(1);s.$observer(!0).data=c,s[l]=c.cur};var _={};t.factory=function(e){var t;return e&&1==e.nodeType&&((t=a.attr(e,"data-timepicker-index"))||a.attr(e,"data-timepicker-index",t=+new Date),e=t),!0===e?new TimePicker:_[t=e||"___"]||(_[t]=new TimePicker)}});